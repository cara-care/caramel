{"version":3,"sources":["../../../../build/lib/organisms/BottomSheetAndroid.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","defineProperty","exports","value","react_1","require","react_native_1","ORIENTATIONS","BottomSheetAndroid","_super","props","_this","height","state","modalVisible","animatedHeight","Animated","Value","pan","ValueXY","buttonHeight","options","createPanResponder","setModalVisible","visible","_a","minClosingHeight","duration","onClose","_b","setState","timing","toValue","start","setValue","x","y","closeOnDragDown","panResponder","PanResponder","onStartShouldSetPanResponder","onPanResponderMove","e","gestureState","dy","event","onPanResponderRelease","spring","open","close","render","animationType","closeOnPressMask","closeOnPressBack","closeOnButtonPress","customStyles","cancelButtonIndex","panStyle","transform","getTranslateTransform","default","createElement","Modal","transparent","supportedOrientations","onRequestClose","KeyboardAvoidingView","enabled","Platform","OS","behavior","style","styles","wrapper","undefined","TouchableOpacity","mask","activeOpacity","onPress","View","panHandlers","container","map","option","index","key","onPressWithIndex","button","Text","text","Component","StyleSheet","fontSize","lineHeight","color","justifyContent","alignItems","borderBottomWidth","borderBottomColor","flex","backgroundColor","width","overflow","draggableContainer","draggableIcon","borderRadius","margin"],"mappings":"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","file":"BottomSheetAndroid.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar react_native_1 = require(\"react-native\");\nvar ORIENTATIONS = [\n    'portrait',\n    'portrait-upside-down',\n    'landscape',\n    'landscape-left',\n    'landscape-right',\n];\nvar BottomSheetAndroid = /** @class */ (function (_super) {\n    __extends(BottomSheetAndroid, _super);\n    function BottomSheetAndroid(props) {\n        var _this = _super.call(this, props) || this;\n        _this.height = 0;\n        _this.state = {\n            modalVisible: false,\n            animatedHeight: new react_native_1.Animated.Value(0),\n            pan: new react_native_1.Animated.ValueXY(),\n        };\n        _this.height = props.buttonHeight * props.options.length + 30;\n        if (!_this.height) {\n            _this.height = 300;\n        }\n        _this.createPanResponder(props);\n        return _this;\n    }\n    BottomSheetAndroid.prototype.setModalVisible = function (visible) {\n        var _this = this;\n        var _a = this.props, minClosingHeight = _a.minClosingHeight, duration = _a.duration, onClose = _a.onClose;\n        var _b = this.state, animatedHeight = _b.animatedHeight, pan = _b.pan;\n        if (visible) {\n            this.setState({ modalVisible: visible });\n            react_native_1.Animated.timing(animatedHeight, {\n                toValue: this.height,\n                duration: duration,\n            }).start();\n        }\n        else {\n            react_native_1.Animated.timing(animatedHeight, {\n                toValue: minClosingHeight,\n                duration: duration,\n            }).start(function () {\n                pan.setValue({ x: 0, y: 0 });\n                _this.setState({\n                    modalVisible: visible,\n                    animatedHeight: new react_native_1.Animated.Value(0),\n                });\n                if (typeof onClose === 'function') {\n                    onClose();\n                }\n            });\n        }\n    };\n    BottomSheetAndroid.prototype.createPanResponder = function (props) {\n        var _this = this;\n        var closeOnDragDown = props.closeOnDragDown;\n        var pan = this.state.pan;\n        this.panResponder = react_native_1.PanResponder.create({\n            onStartShouldSetPanResponder: function () {\n                return closeOnDragDown ? closeOnDragDown : false;\n            },\n            onPanResponderMove: function (e, gestureState) {\n                if (gestureState.dy > 0) {\n                    react_native_1.Animated.event([null, { dy: pan.y }])(e, gestureState);\n                }\n            },\n            onPanResponderRelease: function (e, gestureState) {\n                if (_this.height / 4 - gestureState.dy < 0) {\n                    _this.setModalVisible(false);\n                }\n                else {\n                    react_native_1.Animated.spring(pan, { toValue: { x: 0, y: 0 } }).start();\n                }\n            },\n        });\n    };\n    BottomSheetAndroid.prototype.open = function () {\n        this.setModalVisible(true);\n    };\n    BottomSheetAndroid.prototype.close = function () {\n        this.setModalVisible(false);\n    };\n    BottomSheetAndroid.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, animationType = _a.animationType, closeOnPressMask = _a.closeOnPressMask, closeOnPressBack = _a.closeOnPressBack, closeOnButtonPress = _a.closeOnButtonPress, options = _a.options, customStyles = _a.customStyles, cancelButtonIndex = _a.cancelButtonIndex;\n        var _b = this.state, animatedHeight = _b.animatedHeight, pan = _b.pan, modalVisible = _b.modalVisible;\n        var panStyle = {\n            transform: pan.getTranslateTransform(),\n        };\n        return (react_1.default.createElement(react_native_1.Modal, { transparent: true, animationType: animationType, visible: modalVisible, supportedOrientations: ORIENTATIONS, onRequestClose: function () {\n                if (closeOnPressBack) {\n                    _this.setModalVisible(false);\n                }\n            } },\n            react_1.default.createElement(react_native_1.KeyboardAvoidingView, { enabled: react_native_1.Platform.OS === 'ios', behavior: \"padding\", style: [\n                    styles.wrapper,\n                    customStyles ? customStyles.wrapper : undefined,\n                ] },\n                react_1.default.createElement(react_native_1.TouchableOpacity, { style: styles.mask, activeOpacity: 1, onPress: function () { return (closeOnPressMask ? _this.close() : null); } }),\n                react_1.default.createElement(react_native_1.Animated.View, __assign({}, (this.panResponder ? this.panResponder.panHandlers : undefined), { style: [\n                        panStyle,\n                        styles.container,\n                        { height: animatedHeight },\n                        customStyles ? customStyles.container : undefined,\n                    ] }), options &&\n                    options.map(function (option, index) { return (react_1.default.createElement(react_native_1.TouchableOpacity, { key: index, onPress: function () {\n                            if (index !== cancelButtonIndex) {\n                                _this.props.onPressWithIndex(index);\n                                if (closeOnButtonPress) {\n                                    _this.close();\n                                }\n                            }\n                            else if (cancelButtonIndex) {\n                                _this.close();\n                            }\n                        }, style: [styles.button, { height: _this.props.buttonHeight }] },\n                        react_1.default.createElement(react_native_1.Text, { style: styles.text }, option))); })))));\n    };\n    return BottomSheetAndroid;\n}(react_1.Component));\nvar styles = react_native_1.StyleSheet.create({\n    text: {\n        fontSize: 20,\n        lineHeight: 32,\n        color: '#2e7df6',\n    },\n    button: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderBottomWidth: 0.2,\n        borderBottomColor: '#535D7E',\n    },\n    wrapper: {\n        flex: 1,\n        backgroundColor: '#00000077',\n    },\n    mask: {\n        flex: 1,\n        backgroundColor: 'transparent',\n    },\n    container: {\n        backgroundColor: '#fff',\n        width: '100%',\n        height: 0,\n        overflow: 'hidden',\n    },\n    draggableContainer: {\n        width: '100%',\n        alignItems: 'center',\n        backgroundColor: 'transparent',\n    },\n    draggableIcon: {\n        width: 35,\n        height: 5,\n        borderRadius: 5,\n        margin: 10,\n        backgroundColor: '#ccc',\n    },\n});\nexports.default = BottomSheetAndroid;\n//# sourceMappingURL=BottomSheetAndroid.js.map"]}